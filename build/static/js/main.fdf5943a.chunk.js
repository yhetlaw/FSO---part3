(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),s=t.n(c),r=t(3),o=t(1),a=t(0),u=function(e){var n=e.persons;return Object(a.jsxs)("div",{children:["Search name: ",Object(a.jsx)("input",{onChange:function(e){var t=e.target.value,c=n.map((function(e){return e.name.toUpperCase()})),s=document.getElementById("pExists");c.includes(t.toUpperCase())?s.innerHTML="The name ".concat(t," exists"):s.innerHTML="The name ".concat(t," does not exist")}}),Object(a.jsx)("p",{id:"pExists"})]})},i=t(4),l=t.n(i),d="/api/persons",b=function(){return l.a.get(d).then((function(e){return e.data}))},j=function(e){return l.a.post(d,e).then((function(e){return e.data}))},h=function(e,n){return l.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},m=function(e){return l.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},f=function(e){var n=e.onNameChange,t=e.onNumberChange,c=e.persons,s=e.newName,r=e.newNumber,o=e.setNewName,u=e.setNewNumber,i=e.setPersons,l=e.setLength,d=e.length,b=e.setAlertMessage,m=e.setErrorMessage;return Object(a.jsx)("div",{children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={name:s,number:r},t=c.map((function(e){return e.name.toUpperCase()})),a=c.map((function(e){return e.number}));t.includes(s.toUpperCase())?window.confirm("The name ".concat(s," is already added to the phonebook, replace old number with the new one?"))?h(c.filter((function(e){return e.name===s}))[0].id,n).then((function(e){i(Object.assign(c,n)),b("Contact ".concat(s," has been updated!")),setTimeout((function(){b(null)}),3e3),o(""),u(""),l(d+1),l(d-1)})).catch((function(e){m("Information of ".concat(s," has already been removed previously!")),setTimeout((function(){b(null)}),3e3)})):console.log("fail"):a.includes(r)?alert("Number ".concat(r," is taken")):j(n).then((function(e){i(c.concat(e)),b("Contact ".concat(s," has been added!")),setTimeout((function(){b(null)}),3e3),o(""),u("")}))},children:[Object(a.jsxs)("div",{children:["name: ",Object(a.jsx)("input",{value:s,onChange:n})]}),Object(a.jsxs)("div",{children:["number: ",Object(a.jsx)("input",{value:r,onChange:t})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:"add"})})]})})},p=function(e){var n=e.handleButtonDelete,t=e.text,c=e.id,s=e.number;return Object(a.jsxs)("li",{children:[t," ",s," ",Object(a.jsx)("button",{"data-id":c,onClick:n,children:"Delete"})]})},O=function(e){var n=e.persons,t=e.setPersons,c=e.setLength,s=function(e){var s=e.target.getAttribute("data-id");console.log(s),window.confirm("Are you sure you want to delete?")&&m(s).then((function(e){t(n.filter((function(e){return e.id!==s}))),console.log("Deleted successfully"),c(n.length)})).catch((function(e){console.log("fail")}))};return Object(a.jsx)("div",{children:Object(a.jsx)("ul",{children:n.map((function(e){return Object(a.jsx)(p,{id:e.id,text:e.name,number:e.number,handleButtonDelete:s},e.id)}))})})},g=function(e){var n=e.message;return null===n?null:Object(a.jsx)("div",{className:"alert",children:n})},x=function(e){var n=e.message;return null===n?null:Object(a.jsx)("div",{className:"error",children:n})},v=function(){var e=Object(o.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],s=Object(o.useState)(""),i=Object(r.a)(s,2),l=i[0],d=i[1],j=Object(o.useState)(""),h=Object(r.a)(j,2),m=h[0],p=h[1],v=Object(o.useState)([]),N=Object(r.a)(v,2),w=N[0],C=N[1],y=Object(o.useState)(null),k=Object(r.a)(y,2),S=k[0],T=k[1],E=Object(o.useState)(null),L=Object(r.a)(E,2),M=L[0],A=L[1];return Object(o.useEffect)((function(){b().then((function(e){console.log("promise fulfilled"),c(e)}))}),[w]),console.log("render",t.length,"persons"),Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Phonebook"}),Object(a.jsx)(u,{persons:t}),Object(a.jsx)("h1",{children:"Add a new contact"}),Object(a.jsx)(f,{onNameChange:function(e){return d(e.target.value)},onNumberChange:function(e){return p(e.target.value)},persons:t,newName:l,newNumber:m,setNewName:d,setNewNumber:p,setPersons:c,setLength:C,length:w,setAlertMessage:T,setErrorMessage:A}),Object(a.jsx)("h1",{children:"Contacts"}),Object(a.jsx)(g,{message:S}),Object(a.jsx)(x,{message:M}),Object(a.jsx)(O,{persons:t,setPersons:c,setLength:C})]})};t(38);s.a.render(Object(a.jsx)(v,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.fdf5943a.chunk.js.map